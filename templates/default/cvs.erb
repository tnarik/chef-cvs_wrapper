#!/usr/bin/env bash
source <%= @wrapper_path %>

pathmunge_shell () {
  case ":${PATH}:" in
    *:"${1}":*)
      ;;
    *)
      if [ "${2}" = "after" ] ; then
        PATH=${PATH}:${1}
      else
        PATH=${1}:${PATH}
      fi
  esac
}

# This variation of pathmunge allows forcing precedence
pathmunge () {
  if ! echo ${PATH} | /bin/egrep "(^|:)${1}($|:)" >/dev/null ; then
    if [ "${2}" = "after" ] ; then
      PATH=${PATH}:${1}
    else
     PATH=${1}:${PATH}
    fi
  fi
  if [ "${2}" = "before" ] ; then
    PATH=${1}:${PATH}
  fi
}

# This is now the script, the script calls the command, and this is the command
pathmunge <%= @cvs_path %> before
cvs "$@"
